"use strict";
/*
 * @adonisjs/validator
 *
 * (c) Harminder Virk <virk@adonisjs.com>
 *
 * For the full copyright and license information, please view the LICENSE
 * file that was distributed with this source code.
 */
Object.defineProperty(exports, "__esModule", { value: true });
exports.toLuxon = void 0;
const luxon_1 = require("luxon");
/**
 * A list of pre-defined formats and their luxon specific methods
 */
const PREDEFINED_FORMATS = {
    rfc2822: 'fromRFC2822',
    http: 'fromHTTP',
    sql: 'fromSQL',
    iso: 'fromISO',
};
/**
 * Convers a value to an instance of datetime
 */
function toLuxon(value, format) {
    let dateTime;
    /**
     * If value is a date instance or a string, then convert it to an instance
     * of luxon.DateTime.
     */
    if (value instanceof Date === true) {
        dateTime = luxon_1.DateTime.fromJSDate(value);
    }
    else if (luxon_1.DateTime.isDateTime(value)) {
        dateTime = value;
    }
    else if (typeof value === 'string') {
        const formatterFn = PREDEFINED_FORMATS[format || 'iso'];
        dateTime = formatterFn ? luxon_1.DateTime[formatterFn](value) : luxon_1.DateTime.fromFormat(value, format);
    }
    return dateTime;
}
exports.toLuxon = toLuxon;
